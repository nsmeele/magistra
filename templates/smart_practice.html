{% extends "base.html" %}

{% block title %}Smart Practice - Magistra{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Smart Practice - Oefen je moeilijkste woorden</h2>
    <a href="{% if word_list %}{{ url_for('main.list_detail', list_id=word_list.id) }}{% else %}{{ url_for('main.index') }}{% endif %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Terug
    </a>
</div>

<div class="bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-8 rounded-lg mb-8">
    <p class="m-0 text-lg leading-relaxed">
        <i class="fas fa-brain text-xl mr-2"></i>
        {% if word_list %}
            Hieronder staan de <strong>{{ entries|length }} moeilijkste woorden</strong> uit "<strong>{{ word_list.name }}</strong>".
        {% else %}
            Hieronder staan je <strong>{{ entries|length }} moeilijkste woorden</strong> over alle lijsten.
        {% endif %}
        Deze woorden hebben de laagste success rate en kunnen extra oefening gebruiken!
    </p>
</div>

<div>
    <h3 class="mb-6">Woorden om te oefenen</h3>
    <div class="grid grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-4 mb-8">
        {% for entry in entries %}
            <div class="bg-white p-5 rounded-lg border-l-4 transition-transform hover:-translate-y-0.5 hover:shadow-lg {% if entry.success_rate is none or entry.success_rate < 20 %}border-l-red-500{% elif entry.success_rate < 40 %}border-l-red-500{% elif entry.success_rate < 60 %}border-l-orange-500{% elif entry.success_rate < 80 %}border-l-yellow-500{% else %}border-l-green-500{% endif %}">
                <div class="mb-4">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-lg font-semibold">{{ entry.source_word }}</span>
                        <i class="fas fa-exchange-alt text-gray-500 text-sm"></i>
                        <span class="text-lg font-semibold">{{ entry.target_word }}</span>
                    </div>
                    {% if entry.success_rate is not none %}
                        <div class="mt-2">
                            <span class="inline-block text-sm font-semibold mb-1">{{ entry.success_rate }}%</span>
                            <div class="h-1.5 bg-gray-200 rounded-sm overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-red-500 via-orange-500 to-green-500 transition-[width] duration-300" style="width: {{ entry.success_rate }}%"></div>
                            </div>
                        </div>
                    {% endif %}
                </div>
                <div class="flex justify-between pt-3 border-t border-gray-200 text-sm text-gray-500">
                    <span>{{ entry.total_attempts }} pogingen</span>
                    <span>{{ entry.list.name }}</span>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<div class="bg-white p-8 rounded-lg text-center">
    <form method="POST">
        <div class="max-w-[400px] mx-auto mb-6">
            <label for="direction" class="block mb-2 font-medium text-gray-800">Kies richting:</label>
            <select name="direction" id="direction" class="w-full px-3 py-3 border border-gray-300 rounded text-base bg-white focus:outline-none focus:border-blue-500 cursor-pointer">
                <option value="random">Willekeurig (beide richtingen)</option>
                <option value="forward">
                    {% if word_list %}
                        {{ word_list.source_language }} -> {{ word_list.target_language }}
                    {% else %}
                        Bron -> Doel
                    {% endif %}
                </option>
                <option value="reverse">
                    {% if word_list %}
                        {{ word_list.target_language }} -> {{ word_list.source_language }}
                    {% else %}
                        Doel -> Bron
                    {% endif %}
                </option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary btn-large">
            <i class="fas fa-play"></i> Start Practice Quiz
        </button>
    </form>
</div>
{% endblock %}
