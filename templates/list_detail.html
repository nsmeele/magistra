{% extends "base.html" %}

{% block title %}{{ word_list.name }} - Magistra{% endblock %}

{% block content %}
<div class="list-header">
    <div>
        <h2>{{ word_list.name }}</h2>
        <p class="languages">{{ word_list.source_language }} â†’ {{ word_list.target_language }}</p>
    </div>
    <div class="header-actions">
        {% if word_list.entries %}
            <a href="{{ url_for('main.quiz_start', list_id=word_list.id) }}" class="btn btn-primary"><i class="fa-solid fa-play"></i> Start Oefening</a>
            <a href="{{ url_for('main.smart_practice_list', list_id=word_list.id) }}" class="btn btn-secondary"><i class="fas fa-brain"></i> Smart Practice</a>
        {% endif %}
        <form method="POST" action="{{ url_for('main.delete_list', list_id=word_list.id) }}" class="inline">
            {{ delete_form.hidden_tag() }}
            {{ delete_form.submit(class="btn btn-danger", onclick="return confirm('Weet je zeker dat je deze lijst wilt verwijderen?')", value="Lijst Verwijderen") }}
        </form>
    </div>
</div>

<h3>Woord/Zin Toevoegen</h3>
<form method="POST" action="{{ url_for('main.add_entry', list_id=word_list.id) }}" class="form inline-form">
    {{ form.hidden_tag() }}
    <div class="form-group">
        {{ form.entry_type.label }}
        {{ form.entry_type(class="form-control") }}
    </div>
    <div class="form-group">
        <label for="source_word">{{ word_list.source_language }}:</label>
        {{ form.source_word(class="form-control") }}
    </div>
    <div class="form-group">
        <label for="target_word">{{ word_list.target_language }}:</label>
        {{ form.target_word(class="form-control") }}
    </div>
    {{ form.submit(class="btn btn-primary") }}
</form>

<h3>Items ({{ word_list.entries|length }})</h3>
{% if word_list.entries %}
    <table class="words-table">
        <thead>
            <tr>
                <th>Type</th>
                <th>{{ word_list.source_language }}</th>
                <th>{{ word_list.target_language }}</th>
                <th>Score</th>
                <th>Acties</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in word_list.entries %}
                <tr>
                    <td>{{ 'Zin' if entry.entry_type == 'sentence' else 'Woord' }}</td>
                    <td>{{ entry.source_word }}</td>
                    <td>{{ entry.target_word }}</td>
                    <td>
                        {% if entry.correct_count + entry.incorrect_count > 0 %}
                            <span class="score-good">{{ entry.correct_count }}</span> /
                            <span class="score-bad">{{ entry.incorrect_count }}</span>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('main.edit_entry', entry_id=entry.id) }}" class="btn btn-small btn-secondary"><i class="fa-solid fa-edit"></i></a>
                        <form method="POST" action="{{ url_for('main.delete_entry', entry_id=entry.id) }}" class="inline">
                            {{ delete_form.hidden_tag() }}
                            <button type="submit" class="btn btn-small btn-danger" onclick="return confirm('Weet je zeker dat je dit item wilt verwijderen?')"><i class="fa-solid fa-trash"></i></button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p class="empty-state">Deze lijst heeft nog geen items. Voeg hierboven je eerste woord of zin toe!</p>
{% endif %}
{% endblock %}
